/*! violette 04-03-2015 */
var Logger=function(){"use strict";var a=function(a){this.key=a};return a.prototype.warn=function(a){LE.warn("["+this.key+"] "+a)},a.prototype.info=function(a){LE.info("["+this.key+"] "+a)},a.prototype.error=function(a){LE.error("["+this.key+"] "+a)},a.prototype.debug=function(a){LE.log("["+this.key+"] "+a)},a}(),Utils=function(a,b){"use strict";function c(a,b){var c=a.handler.indexOf(b);c>-1&&(delete a.handler[c],delete a.callback[c],a.log.debug(b+" handler was deleted"))}function d(a){return null==a||0==a.length}function e(a,b){for(var c=a.length;c--;)if(JSON.stringify(a[c])===JSON.stringify(b))return!0;return!1}function f(b,c){var d=null;if(!c.is("textarea")){var e=null!=b.content?b.content:c.text();d=a.trim(e),c.is("div")&&(d=d.replace(/(<([^>]+)>)/gi,"").replace(/ +(?= )/g,"").replace(/^ +/gm,""))}return d}function g(a){var b,c=a.split(/\r\n|\r|\n/),d=0,e=!1,f=!1;if(c.forEach(function(a,c){var g,h=!1;for(g=0;g<a.length;g++){var i=a[g];if(e)"/"===i&&"*"===a[g-1]&&(e=!1);else if(f)h=!0,i===b?f=!1:"\\"===i&&g++;else if(" "!==i&&"	"!==i)if('"'===i||"'"===i)h=!0,f=!0,b=i;else if("/"===i){if("*"!==a[g+1]){if("/"===a[g+1])break;if(h=!0,-1!==a.indexOf("/*",g+1))throw"Potential block comment start following potential regular expression on same line"+c;if(-1!==a.indexOf('"',g+1)||-1!==a.indexOf("'",g+1)){var j=a.trim();if("\\"===j[j.length-1])throw"Potential multi-line string literal following potential regular expression on same line"+c}break}e=!0,g++}else if(h=!0,"*"===i&&"/"===a[g+1])throw"Unexpected */ when not in a block comment"+c}if(h&&d++,f&&"\\"!==a[a.length-1])throw"Unclosed string at end of line"+c}),e)throw"Unclosed block comment at end of file";if(f)throw"Unclosed string at end of file";return{total:c.length,sloc:d}}function h(a,b){return a+i(b-a)}function i(a){return Math.floor(Math.random()*a)}function j(a){return a+"-"+h(1,1e4)}function k(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}}return b.selectText=function(a){var b,c;document.body.createTextRange?(b=document.body.createTextRange(),b.moveToElementText(a),b.select()):window.getSelection&&(c=window.getSelection(),b=document.createRange(),b.selectNodeContents(a),c.removeAllRanges(),c.addRange(b))},b.createLocation=function(a,b,c){if(!(0>b||b>c)){if(!a)return{from:{line:-1,col:-1,offset:b},to:{line:-1,col:-1,offset:c}};var d=a.length;c=Math.min(c,d),b=Math.min(b,c);for(var e,f=0,g=0,h=0,i=0;d>=i;i++){if(i==b&&(e={line:f,col:i-g,offset:i}),i==c){var j={line:f,col:i-g,offset:i};return{from:e,to:j}}var k=a.charAt(i);"\n"==k?(g=i+1,"\r"!==h&&f++):"\r"==k&&(f++,g=i+1),h=k}}return{from:{line:-1,col:-1,offset:b},to:{line:-1,col:-1,offset:c}}},b.selectionLocation=function(a,c,d){for(var e,f=a.getCursor("from"),g=c.split("\n"),h=f.line,i=0,j=0;j<g.length;j++){if(h==j){var k=i+f.line+f.ch,l=k+d.length;e=b.createLocation(c,k,l);break}i+=g[j].length}return e=e||null},b.selectionOffsets=function(a,c,d){var e=b.selectionLocation(a,c,d),f=0,g=0;return e&&(f=e.from.offset,g=e.to.offset),{start:f,end:g}},b.createCode=function(a,b,c,d,e,f,g,h,i,j,k){d=d||[],e=e||[],f=f||[],g=g||[],h=h||0,i=i||[],j=j||"",k=k||"new";var l=document.location.href,m=Date.now();return b=b||"Java: *scratched* code snippet",{id:k,name:a,description:b,content:c,elapsedtime:j,tags:d,datastructures:e,algorithms:f,refactorings:g,confidence:h,comments:i,url:l,birthday:m}},b.brand=j,b.debounce=k,b.count=g,b.getContent=f,b.contains=e,b.deleteButtonHandler=c,b.isStringEmpty=d,b}(window.jQuery,Utils||{}),Matcher=function(a,b){"use strict";function c(a,b){var c=[];return a.replace(b,function(){if(arguments&&arguments.length>0)for(var b=0;b<arguments.length;b++){var d=arguments[b];a===d&&c.push(d)}}),c.length>0}function d(a){var b=/(\/\*[\w'\s\r\n\*]*\*\/)|(\/\/[\w\s']*)/gm;return c(a,b)}function e(a){var b=/import[^;=\n]*\s[\S\s]*?(?=;)/;return c(a,b)}function f(a){var b=/class[^;=\n]*\s[\S\s]*?(?={)/;return c(a,b)}function g(a){var b=/^\s*?(((public|private|protected|static|final|native|synchronized|abstract|threadsafe|transient)\s+?)*)\s*?(\w+?)\s+?(\w+?)\s*?\(([^)]*)\)[\w\s,]*?(?={)?\s*?/;return c(a,b)}function h(a,b){var c=/class[^;=\n]*\s[\S\s]*?(?={)/g,d=[];a.replace(c,function(){var a=arguments[0];a&&a.length>0&&d.push(a.replace("\n"," ").split(" ")[1])});var e=d[0];return e?e:b}return b.matches=c,b.isComment=d,b.isMethod=g,b.matchClassName=h,b.isImport=e,b.isClass=f,b}(window.jQuery,Matcher||{}),Drafts=function(){"use strict";var a=function(a){this.drafts={},this.drafts[a]=[],this.owner=a};return a.buildDraft=function(a,b,c,d){return{name:a,before:b,after:c,notes:d}},a.mark=function(a,b,c){if(a.drafts.empty()){var d="",e=a.codemirror.getValue();a.notes=Notes.transfer(a,a.notes),a.drafts.newDraft("Origin",d,e,a.notes.toJSON()),a.log.info("Creating draft ZERO (aka `NULL draft`)")}var f=a.drafts.last(),g=f.after;if(g!==b){var h=g,i=b,j=a.lastaction;j=null==j?"Manual Edit":j,a.notes=Notes.transfer(a,a.notes),a.drafts.newDraft(j,h,i,a.notes.toJSON()),a.lastaction=null,a.log.info("A new draft has been marked!"),c("info",a,"A new draft has been marked!")}},a.prototype.addDraft=function(a){Utils.contains(this.drafts[this.owner],a)||this.drafts[this.owner].push(a)},a.prototype.clear=function(){this.drafts[this.owner]=[]},a.prototype.last=function(){return this.getDraft(this.size()-1)},a.prototype.getDraft=function(a){return 0>a||a>this.size()?null:this.drafts[this.owner][a]},a.prototype.contains=function(a){return void 0!==this.drafts[this.owner][a]},a.prototype.empty=function(){return 0==this.size()},a.prototype.newDraft=function(b,c,d,e){this.addDraft(a.buildDraft(b,c,d,e))},a.prototype.update=function(a,b){this.contains(a)&&(this.drafts[this.owner][a].notes=b)},a.prototype.size=function(){return this.drafts[this.owner].length},a.prototype.toArray=function(){var a,b,c=[],d=this.size();for(a=0;d>a;a++)b=this.getDraft(a),c.push(b);return c},a.prototype.toJSON=function(){return{drafts:this.toArray()}},a}(),Notes=function(){"use strict";function a(a){return-1!=a.from.line&&-1!=a.from.col&&-1!=a.to.line&&-1!=a.to.col}function b(a,b){var c=a.charCoords({line:b,ch:0},"local").top,d=a.getScrollerElement().offsetHeight/2;a.scrollTo(null,c-d-5)}function c(a,b,c){var d=[],e=b.line;return a.iter(b.line,c.line+1,function(a){var f=a.text;e==c.line&&(f=f.slice(0,c.ch)),e==b.line&&(f=f.slice(b.ch)),d.push(f),++e}),d}function d(a,b){var c=0,d=a.length-1,e=b.length-1;if(1>d||1>e)return 0;var f,g=[];for(f=0;e>f;f++)g.push(b.substr(f,2));for(f=0;d>f;f++)for(var h=a.substr(f,2),i=0;e>i;i++)if(h==g[i]){c++,g[i]=null;break}return 2*c/(d+e)}function e(b,c,d,e){var f=b.indexOf(c);if(-1!=f){var g=f+c.length,h=Utils.createLocation(b,f,g);if(a(h)){var i=d;i.range=h,e.addNote(i)}}}var f=function(a){this.vault={},this.vault[a]=[],this.owner=a,this.counter=0};return f.buildNote=function(a,b,c){return{text:a,range:b,marked:c}},f.chunkContent=function(b,d){if(""===b||!b||!a(d))return"<NONE>";var e=new Editor.Doc(b,"text/x-java"),f={line:d.from.line,ch:d.from.col},g={line:d.to.line,ch:d.to.col},h=c(e,f,g);return h.join("\n")},f.formatNote=function(a){var b=a.range,c=a.text;return{from:b.from.line+";"+b.from.col+";"+b.from.offset,to:b.to.line+";"+b.to.col+";"+b.to.offset,text:c,username:"You"}},f.nextNote=function(a){var c=a.notes.next();if(c){var d=c.text,e=c.range,f={line:e.from.line,ch:e.from.col},g={line:e.to.line,ch:e.to.col};!function(a,c,d){var e=d.codemirror;d.codemirror.operation(function(){e.getDoc().setSelection(a,c),b(e,a.line)})}(f,g,a),d=d.substring(0,1).toUpperCase()+d.substring(1),a.displayer.text(d),a.codemirror.focus()}},f.copyNotes=function(a,b){b=b||[];for(var c=new f(a),d=b.length,e=0;d>e;e++){var g=b[e];c.addNote(g)}return c},f.transfer=function(a,b){for(var g=new f(a.primaryKey),h=a.codemirror,i=h.getValue()||"",j=b.toRawArray(),k=j.length,l=0;k>l;l++){var m=j[l].range,n={line:m.from.line,ch:m.from.col},o={line:m.to.line,ch:m.to.col},p=j[l].marked,q=c(h.getDoc(),n,o);if(q&&q.length>0){var r=q.join("\n"),s=d(p,r);1==s?g.addNote(j[l]):e(i,p,j[l],g)}else e(i,p,j[l],g)}return g},f.prototype.addNote=function(a,b){if(!Utils.contains(this.vault[this.owner],a)){this.vault[this.owner].push(a);var c=this;b&&b({payload:{size:c.size()}})}},f.prototype.clear=function(){this.vault[this.owner]=[]},f.prototype.current=function(){return this.vault[this.owner][this.counter]},f.prototype.getNote=function(a){return 0>a||a>this.size()?null:this.vault[this.owner][a]},f.prototype.next=function(){return this.counter++,this.counter>this.size()-1&&(this.counter=0),this.current()},f.prototype.previous=function(){return this.counter--,this.counter<0&&(this.counter=this.size()-1),this.current()},f.prototype.empty=function(){return 0==this.size()},f.prototype.size=function(){return this.vault[this.owner].length},f.prototype.toArray=function(a){var b,c,d=[],e=this.size();if(a)for(b=0;e>b;b++)c=this.getNote(b),d.push(a(c));else for(b=0;e>b;b++)c=this.getNote(b),d.push(c);return d},f.prototype.toRawArray=function(){return this.toArray(null)},f.prototype.toHashArray=function(){return this.toArray(f.formatNote)},f.prototype.toJSON=function(){return{notes:this.toRawArray()}},f}(),Html=function(a,b){"use strict";function c(a,c,d){var f=b.buildHtml("span",{"class":"tabnav-left"},{});return c=e(a,c,f,d)}function d(a,c,d){var f=b.buildHtml("span",{"class":"tabnav-right"},{});return c=e(a,c,f,d)}function e(a,c,d,e){for(var f=e.length,g=0;f>g;g++){var h=(b.buildHtml("div",{"class":"btn-group"},{}),e[g]),k=h.name,l=h.title,m=h.icon,n=h.callback,o="undefined"!=typeof h.label,p=o?h.label:'<span class="'+m+'"></span>',q=a.namespace+"-"+k,r=o?j(k,l,a,q,p):i(k,l,a,q,p);r.tooltipster({position:"top",hideOnClick:!0,theme:"tooltip-custom-theme"}),a.handler.push(q),a.callback.push(n),d.append(r)}return c.append(d),c}function f(){return b.buildHtml("span",{"class":"meta-divider"},{})}function g(a){return b.buildHtml("span"," "+a+" ",{"class":"extra"})}function h(a,c){a.status=b.buildHtml("span","NOT SAVED ",{"class":"status"});var d=a.content.replace(/\r\n|\r/g,"\n"),e=Utils.count(d),h=e.total+" lines ("+e.sloc+" sloc)";return a.sloc=g(h),c.append(a.status),c.append(f()),c.append(a.sloc),c}function i(a,c,d,e,f){var g="delete"==a;return b.buildHtml("button",f,{type:"button","class":g?"violette-button octicon-button danger btn-dark-link":"violette-button octicon-button btn-dark-link",title:c,"data-provider":d.namespace,"data-handler":e})}function j(a,c,d,e,f){var g="document"===a;return b.buildHtml("button",f,{type:"button","class":g?"violette-button minibutton dark":"violette-button minibutton",title:c,"data-provider":d.namespace,"data-handler":e})}function k(a,c,d,e){return b.buildHtml("button",e,{type:"button","class":"violette-button minibutton",title:a,"data-provider":c.namespace,"data-handler":d})}function l(a){return b.buildHtml("button",'<span class="octicon octicon-x" aria-hidden="true"></span>',{"class":"close","aria-label":"Close","data-provider":a.namespace,"data-handler":a.namespace+"-close"})}function m(a){return b.buildHtml("button",'<span class="octicon octicon-arrow-right" aria-hidden="true"></span>',{"class":"next","aria-label":"Next","data-provider":a.namespace,"data-handler":a.namespace+"-next",title:"Next note"})}function n(a){a.staging.removeClass("violette-history"),a.staging.attr("class","violette-multistage"),a.staging.css({height:"25px"});var b=Html.buildHtml("span",{"class":"tabnav-left"},{});a.displayer=Html.buildHtml("span","",{"class":"note"}),b.append(a.displayer);var c=Html.buildHtml("span",{"class":"tabnav-right"},{});return c.append(Html.buildNextButton(a)),c.append(Html.buildHtml("span",{"class":"break"},{})),c.append(Html.buildClosingButton(a)),a.staging.append(b),a.staging.append(c),a.staging}function o(b,c){var d=Html.buildHtml("div",{id:Utils.brand("starbox"),"class":"input select rating-c","for":"example-c",style:"padding: 15px;margin-bottom:-20px;"},{}),e='<span class="octicon octicon-bookmark"></span> ';e+="How much confident are you on whether this code is reusable?";var f=Html.buildHtml("div",{id:Utils.brand("intent-title"),"class":"titlearea"}),g=Html.buildHtml("label",e,{}),h="Click on a bar to vote. Bar 1 is for no confident at all and bar 5 is for totally confident.",i=Html.buildHtml("p",h,{"class":"help-block",style:"font-weight: normal;"});f.append(g),f.append(i);var j=a(x);d.append(f),d.append(j);var k=b;return j.barrating("show",{initialRating:k.getConfidence(),showValues:!0,showSelectedRating:!1,onSelect:function(a,b){k.log.info("New rating set (value="+a+"; text="+b+")"),k.setConfidence(parseInt(a))}}),c.append(d),c}function p(a,b){var c=b,d=""!=a.hyperlinkTarget?'target="_'+a.hyperlinkTarget+'"':"",e=""!=a.mentionTarget?'target="_'+a.mentionTarget+'"':"",f=""!=a.hashtagTarget?'target="_'+a.hashtagTarget+'"':"",g=""!=a.hyperlinkClass?'class="'+a.hyperlinkClass+'"':"",h=""!=a.mentionClass?'class="'+a.mentionClass+'"':"",i=""!=a.hashtagClass?'class="'+a.hashtagClass+'"':"",j=""!=a.hyperlinkRel?'rel="'+a.hyperlinkRel+'"':"",k=""!=a.mentionRel?'rel="'+a.mentionRel+'"':"",l=""!=a.hashtagRel?'rel="'+a.hashtagRel+'"':"";return 1!=a.excludeHyperlinks&&(c=c.replace(/(https\:\/\/|http:\/\/)([www\.]?)([^\s|<]+)/gi,'<a href="$1$2$3" '+d+" "+g+" "+j+">$1$2$3</a>"),c=c.replace(/([^https\:\/\/]|[^http:\/\/]|^)(www)\.([^\s|<]+)/gi,'$1<a href="http://$2.$3" '+d+" "+g+" "+j+">$2.$3</a>"),c=c.replace(/<([^a]|^\/a])([^<>]+)>/g,"&lt;$1$2&gt;").replace(/&lt;\/a&gt;/g,"</a>").replace(/<(.)>/g,"&lt;$1&gt;").replace(/\n/g,"<br />")),1!=a.excludeMentions&&(c=0==a.mentionIntent?c.replace(/(@)([a-zA-Z0-9_]{1,20})/g,'<a href="http://twitter.com/$2" '+e+" "+h+" "+k+">$1$2</a>"):c.replace(/(@)([a-zA-Z0-9_]{1,20})/g,'<a href="http://twitter.com/intent/user?screen_name=$2">$1$2</a>')),1!=a.excludeHashtags&&(c=c.replace(/(#)(\w+)/g,'<a href="https://twitter.com/search/?src=hash&q=%23$2" '+f+" "+i+" "+l+">$1$2</a>")),c}function q(c,d){var e=Html.buildHtml("div",{id:Utils.brand("intentbox"),style:"padding: 15px;"}),f='<span class="octicon octicon-light-bulb"></span> ';f+="What is the intent behind this code example?";var g=Html.buildHtml("div",{id:Utils.brand("intent-title"),"class":"titlearea"}),h=Html.buildHtml("label",f,{}),i="Provide a description of the goal behind this code and the reason for using it.",j=Html.buildHtml("p",i,{"class":"help-block",style:"font-weight: normal;"});g.append(h),g.append(j);var k=Html.buildHtml("form",{id:Utils.brand("intent"),name:"intent"}),l=Html.buildHtml("div",{id:Utils.brand("composer"),placeholder:"Intent of code example?","class":"intent-composer",contenteditable:!0},{});(Utils.isStringEmpty(l.text())||l.text().length>80)&&d.saveButton.attr("disabled","disabled");var m=Html.buildHtml("fieldset",{"class":"tabnav-right"},{}),n=Html.buildHtml("span",{id:Utils.brand("char-count"),"class":"char-count"},{}),o=b.buildHtml("div",{},{});o.prepend("You have "),o.append(n),o.append(" characters left"),m.append(o),k.append(l),k.append(m),n.text(parseFloat(c.options.textLength-c.getDescription().length));var q=c;return l.on("click",function(){a(this).text(q.getDescription()),q.moveCursorToEnd(a(this)[0]),a(this).focus()}),l.on("blur",function(){var b=a(this);Utils.isStringEmpty(b.text())&&Utils.isStringEmpty(q.getDescription())?b.removeClass("focus"):(b.hasClass("focus")&&b.removeClass("focus"),b.html(p(q.options,q.getDescription())))}),l.on("keyup",function(){var b=a(this).text().length,e=parseFloat(c.options.textLength-b);20>=e?n.addClass("warning"):n.removeClass("warning"),n.text(e),q.setDescription(a(this).text()),b>=80||11>=b?(o.attr("disabled","disabled"),d.saveButton.attr("disabled","disabled")):(o.removeAttr("disabled"),d.saveButton.removeAttr("disabled"))}),Utils.isStringEmpty(c.getDescription())||(l.html(p(q.options,q.getDescription())),l.focus()),e.append(g),e.append(k),d.append(e),d}function r(a,b){var c='<span class="octicon octicon-tag"></span> ';c+="Tags";var d=Html.buildHtml("label",c,{id:Utils.brand("tags-title"),"for":"tag","class":"control-label",style:"margin-bottom: 10px;"}),e=Html.buildHtml("div",{"class":"tagging","data-tags-input-name":"taggone"},{}),f="Press Enter, Comma or Spacebar to create a new tag, Backspace or Delete to remove the last one. You could either write @ (topic), # (datastructure), or ~ (algorithm) along with a text.",g=Html.buildHtml("p",f,{"class":"help-block",style:"font-size: 14px;"}),h=Html.buildHtml("div",{id:Utils.brand("tags"),"class":"tags",placeholder:"Enter new Tag"});h.append(d),h.append(e),h.append(g),b.append(h);var i=a;return a.options.tagging.subscriber=function(a){a&&a.length>0&&i.setTags(a)},e.tagging(a.options.tagging),e.tagging("add",a.getTags()),b}function s(b){var c;b.on("mousedown",function(){c=0}),b.on("mousemove",function(){c=1}),b.on("mouseup",function(){0===c&&Utils.selectText(a(this)[0])})}function t(a,b){var c=Html.buildHtml("div",{id:Utils.brand("codebox"),style:"padding: 15px;"}),d='<span class="octicon octicon-code"></span> ';d+="Your <strong>modified code fragment</strong> is below. You can easily select it with just <strong>one click</strong>!";var e=Html.buildHtml("div",{id:Utils.brand("code-title"),"class":"titlearea-light"}),f=Html.buildHtml("label",d,{style:"font-weight: normal;"});e.append(f);var g=Html.buildHtml("div",{id:Utils.brand("codecontainer")}),h=Html.buildHtml("pre",{style:"display: block; padding: 6px 4px; background: #fff; border: 0; margin-top:10px;"},{}),i=Utils.brand("code"),j=Html.buildHtml("code",{id:i,"class":"java",style:"font-size: 12px;"},{});return s(j),j.html(a.getContent()),h.append(j),g.append(h),c.append(e),c.append(g),b.append(c),b.codeElement=j,b}function u(a,b){var c=a.getNotes().toHashArray(),d=c.length,e='<span class="octicon octicon-comment-discussion" style="color: #888;"></span> ',f=e+d+(d>1?" Comments":" Comment"),g=Html.buildHtml("div",f,{id:Utils.brand("notes-title"),"class":"notes-title"});b.append(g);for(var h=0;d>h;h++){var i=c[h];if(i){var j=parseInt(i.from.split(";")[0])+1,k=parseInt(i.to.split(";")[0])+1,l=" ["+j+"-"+k+"]",m=Html.buildHtml("blockquote",i.text,{id:Utils.brand("note"),style:"margin-left: 4px; margin-right: 10px;color: #2c3e50; font-size: 13px; margin-top:5px;"}),n=Html.buildHtml("footer",i.username+" annotated section "+l,{});m.append(n),b.append(m)}}return b}function v(a,c){var d=b.buildHtml("span",{"class":"tabnav-right"},{}),e=b.buildHtml("div",{"class":"info"},{});e=h(a,e),c.append(e);for(var f=a.options.actions,g=f.length,j=!1,l=b.buildHtml("div",{"class":"button-group"},{}),m=0;g>m;m++){var n=f[m],o=n.name,p=n.title,q=n.icon,r=n.callback,s="undefined"!=typeof n.label,t=s?n.label:'<span class="'+q+'"></span>',u=a.namespace+"-"+o,v=s?k(p,a,u,t):i(o,p,a,u,t);v.tooltipster({position:"bottom",hideOnClick:!0,theme:"tooltip-custom-theme"}),a.handler.push(u),a.callback.push(r),s?(l.append(v),j=!0):"plus"===o?e.append(v):d.append(v)}return j&&d.append(l),c.append(d),c.append(e),c}function w(a,c){return null!=a.content&&(c=b.buildHtml("textarea",a.content,{"class":"file-editor-textarea violette-input"})),a.textarea=c,c}var x='<select id="example-c" name="rating">   <option value=""></option>   <option value="1">1</option>   <option value="2">2</option>   <option value="3">3</option>   <option value="4">4</option>   <option value="5">5</option></select>';return b.buildHtml=function(b,c,d){"string"!=typeof c&&(d=c,c=null);var e="<"+b;for(var f in d)if(d.hasOwnProperty(f)){if(d[f]===!1)continue;e+=" "+f+'="'+d[f]+'"'}return e+=c?">"+c+"</"+b+">":"/>",a(e)},b.buildHeader=function(a){var c=b.buildHtml("div",{"class":"violette-header  btn-toolbar"},{});return c=v(a,c)},b.buildFooter=function(a){var e=b.buildHtml("div",{"class":"violette-footer"},{}),f=b.buildHtml("div",{"class":"btn-toolbar",style:"margin-top: 5px;"},{});return f=c(a,f,a.options.modes),f=d(a,f,a.options.social),a.staging=b.buildHtml("div",{"class":"violette-multistage btn-toolbar"},{}),e.append(a.staging),e.append(f),a.staging.hide(),e},b.buildBody=function(a,c){var d=b.buildHtml("div",{id:Utils.brand("editing"),"class":"editing"},{});return d.append(w(a,c)),d},b.buildEditTracker=function(){var a=b.buildHtml("div",{id:Utils.brand("tracker"),"class":"violette-slider"},{});return a},b.buildInput=function(a){a=a||"New Note?";var c=b.buildHtml("div",{"class":"col-md-12"},{}),d='<i class="octicon octicon-pencil"></i><input type="text" class="form-control" style="border-color: #d6dbdf;box-shadow: none;" placeholder="'+a+'" />',e=b.buildHtml("div",d,{"class":"right-inner-addon",style:"margin-left: 5px;"});return c.append(e),c},b.buildNextButton=m,b.buildClosingButton=l,b.buildNoteSection=n,b.buildOcticonButton=i,b.buildStars=o,b.buildIntentArea=q,b.buildTagsArea=r,b.buildCodeArea=t,b.buildCollectedNotes=u,b}(window.jQuery,Html||{}),Stopwatch=function(){"use strict";function a(a,b){this.startTime=0,this.stopTime=0,this.totalElapsed=0,this.started=!1,this.listener=void 0!=a?a:null,this.tickResolution=void 0!=b?b:500,this.tickInterval=null,this.onehour=36e5,this.onemin=6e4,this.onesec=1e3,this.start()}return a.prototype.start=function(){var a=function(a,b){return function(){return b.call(a)}};this.started||(this.startTime=(new Date).getTime(),this.stopTime=0,this.started=!0,this.tickInterval=setInterval(a(this,this.onTick),this.tickResolution))},a.prototype.stop=function(){return this.started&&(this.stopTime=(new Date).getTime(),this.started=!1,this.totalElapsed+=this.stopTime-this.startTime,null!=this.tickInterval&&clearInterval(this.tickInterval)),this.getElapsed()},a.prototype.reset=function(){this.totalElapsed=0,this.startTime=(new Date).getTime(),this.stopTime=this.startTime},a.prototype.restart=function(){this.stop(),this.reset(),this.start()},a.prototype.getElapsed=function(){var a=0;this.started&&(a=(new Date).getTime()-this.startTime),a+=this.totalElapsed;var b=parseInt(a/this.onehour);a%=this.onehour;var c=parseInt(a/this.onemin);a%=this.onemin;var d=parseInt(a/this.onesec),e=a%this.onesec;return{hours:b,minutes:c,seconds:d,milliseconds:e}},a.prototype.toString=function(){var a=function(a,b){for(a=a.toString();a.length<b;)a="0"+a;return a},b=this.getElapsed();return a(b.hours,2)+":"+a(b.minutes,2)+":"+a(b.seconds,2)},a.prototype.setListener=function(a){this.listener=a},a.prototype.onTick=function(){null!=this.listener&&this.listener(this)},a}(),Document=function(a,b){"use strict";function c(a){return 1==a.nodeType?!p.contains(a.nodeName):!1}function d(a){var b=a.lastChild;if(!b)return null;for(;1!=b.nodeType&&b.previousSibling;)b=b.previousSibling;return b}function e(a){for(;d(a)&&c(d(a));)a=d(a);var b,e;document.createRange&&(b=document.createRange(),b.selectNodeContents(a),b.collapse(!1),e=window.getSelection(),e.removeAllRanges(),e.addRange(b))}function f(c){c.editor.children().show(),a("textarea.file-editor-textarea").hide(),c.editor.removeClass("violette-document"),c.editor.addClass("violette-editor"),c.confidence=c.document.getConfidence(),c.tags=c.document.getTags(),c.description=Utils.isStringEmpty(c.document.getDescription())?l:c.document.getDescription(),c.exampleId=c.document.getExampleId(),c.tinyUrl=c.document.getTinyUrl(),c.document.container.children().hide(),c.document.container.children().remove(),c.document.container.codeElement.hide(),c.document.container.codeElement.remove(),c.document.container.codeElement=null,c.document.container.saveButton=null,c.document.container.hide(),c.document.container.remove(),c.document.container=null,c.document=null,b.initHighlighting.called=!1;var d=c.codemirror;c.codemirror.operation(function(){d.refresh()}),Utils.deleteButtonHandler(c,n),Utils.deleteButtonHandler(c,o)}function g(a){a.stopwatch.stop();for(var b=a.stopwatch.toString(),c=[],d=[],e=[],g=a.document,h=g.getTags()||[],i=h.length,j=0;i>j;j++){var k=h[j];if(k)switch(k.charAt(0)){case"~":var m=k.substr(k.indexOf("~"),k.length).replace(/^~/,"");d.push(m);break;case"@":var n=k.substr(k.indexOf("@"),k.length).replace(/^~/,"");c.push(n);break;case"#":var o=k.substr(k.indexOf("#"),k.length).replace(/^~/,"");e.push(o);break;default:c.push(k)}}for(var p=g.getNotes().toHashArray()||[],q=[],r=0;r<p.length;r++){var s=p[r];s&&q.push(s)}for(var t=a.drafts.toArray()||[],u=[],v=0;v<t.length;v++){var w=t[v];w&&"No changes"!==w.name&&u.push(w.name)}var x=g.getContent(),y=a.classname,z=g.getConfidence(),A=Utils.isStringEmpty(g.getDescription())?l:g.getDescription(),B=null!==a.exampleId,C=B?a.exampleId:"new",D=Utils.createCode(y,A,x,c,e,d,u,z,q,b,C);g.log.info("Time spent curating example: "+b);var E=a;B?Refactoring.updateCodeSnippet(D,function(a){"undefined"!=typeof a.failure&&g.log.error("Document#saveCodeExample. "+a.failure.message),a.info&&E.document.setExampleId(a.info.messages[1]),g.log.info("Exiting documentation mode after updating code example."),f(E)}):Refactoring.saveCodeSnippet(D,function(a){"undefined"!=typeof a.failure&&g.log.error("Document#saveCodeExample. "+a.failure.message),a.info&&(E.document.setExampleId(a.info.messages[1]),E.document.setTinyUrl(a.info.messages[2])),g.log.info("Exiting documentation mode after saving code example."),f(E)})}function h(a,b,c){for(var d=Html.buildHtml("div",{"class":"btn-toolbar",style:"margin-top:12px;margin-left: 8px;"},{}),e=b.actions,f=0;f<e.length;f++){var g=Html.buildHtml("div",{"class":"button-group"},{}),h=e[f],i=h.name,j=h.title,k=h.label,l=h.icon,m=h.callback,n='<span class="'+l+'"></span> '+k,o=a.namespace+"-"+i,p=Html.buildOcticonButton(i,j,a,o,n);p.tooltipster({position:"bottom",hideOnClick:!0,theme:"tooltip-custom-theme"}),"Save"===k&&(c.saveButton=p),a.handler.push(o),a.callback.push(m),g.append(p),d.append(g)}var q=Matcher.matchClassName(a.codemirror.getValue(),"Scratched")+".java",r=Html.buildHtml("h1",q,{style:'margin-top: 10px;margin-bottom: -2px;margin-left: 15px;font-family:"futura-pt",Helvetica,Arial,sans-serif;text-rendering:optimizeLegibility;'});return c.append(r),c.append(d),c}function i(a,b){return b=Html.buildStars(a,b),b=Html.buildIntentArea(a,b),b=Html.buildTagsArea(a,b),b=Html.buildCodeArea(a,b)}function j(a,b){return b=Html.buildCollectedNotes(a,b)}function k(a,c){var d=c.codeElement;a.editor.append(c),b.initHighlighting.called=!1,d.each(function(a,c){b.highlightBlock(c)})}var l="Java: *scratched* code snippet",m="",n="violette-scratchspace-edit",o="violette-scratchspace-upload",p=["AREA","BASE","BR","COL","EMBED","HR","IMG","INPUT","KEYGEN","LINK","MENUITEM","META","PARAM","SOURCE","TRACK","WBR","BASEFONT","BGSOUND","FRAME","ISINDEX"];Array.prototype.contains=function(a){for(var b=this.length;b--;)if(this[b]===a)return!0;return!1};var q={autofocus:!0,textLength:80,excludeHyperlinks:!1,excludeMentions:!1,excludeHashtags:!1,hyperlinkTarget:"blank",mentionTarget:"blank",mentionIntent:!1,hashtagTarget:"blank",hyperlinkClass:"",mentionClass:"",hashtagClass:"",hyperlinkRel:"",mentionRel:"",hashtagRel:"",actions:[{name:"edit",title:"Switch to editing mode",label:"Edit",icon:"octicon octicon-sign-in",callback:function(a){a.log.info("Exiting documentation mode"),f(a)}},{name:"upload",title:"Save code example ",label:"Save",icon:"octicon octicon-cloud-upload",callback:function(a){a.log.info("Saving code example."),g(a)}}],tagging:{subscriber:function(){},"case-sensitive":!1,"close-char":"&times;","close-class":"tag-i","edit-on-delete":!0,"forbidden-chars":[".","_","?"],"forbidden-chars-callback":window.alert,"forbidden-chars-text":"Forbidden character:","forbidden-words":[],"forbidden-words-callback":window.alert,"forbidden-words-text":"Forbidden word:","no-backspace":!1,"no-comma":!1,"no-del":!1,"no-duplicate":!0,"no-duplicate-callback":window.alert,"no-duplicate-text":"Duplicate tag:","no-enter":!1,"no-spacebar":!1,"pre-tags-separator":", ","tag-box-class":"tagging","tag-char":"","tag-class":"tag","tags-input-name":"tag","tag-on-blur":!0,"type-zone-class":"type-zone"}},r=function(a){this.options=q,this.owner=a.primaryKey,this.vault={},this.vault[this.owner]={},this.log=a.log,this.vault[this.owner].editor=a.editor,this.vault[this.owner].tags=a.tags,this.vault[this.owner].confidence=a.confidence,this.vault[this.owner].content=a.codemirror.getValue(),this.vault[this.owner].notes=a.notes,this.vault[this.owner].tinyUrl=a.tinyUrl||"null",this.vault[this.owner].exampleId=a.exampleId||"null",this.vault[this.owner].description=a.description===l?m:a.description,this.container=null,a.editor.children().hide(),a.editor.removeClass("violette-editor"),a.editor.addClass("violette-document"),this.log.info("Entering into documentation mode"),this.init(a)};return r.prototype.init=function(a){return this.container=Html.buildHtml("div",{id:Utils.brand("document"),"class":"violette-reader"},{}),this.container=h(a,this.options,this.container),this.container=i(this,this.container),this.container=j(this,this.container),k(a,this.container),this},r.prototype.getEditor=function(){return this.vault[this.owner].editor},r.prototype.getTags=function(){return this.vault[this.owner].tags},r.prototype.setTags=function(a){a&&(this.log.info("TAGS has been updated"),this.vault[this.owner].tags=a)},r.prototype.getConfidence=function(){return this.vault[this.owner].confidence},r.prototype.setConfidence=function(a){return this.vault[this.owner].confidence=a,this},r.prototype.getContent=function(){return this.vault[this.owner].content},r.prototype.getNotes=function(){return this.vault[this.owner].notes},r.prototype.getTinyUrl=function(){return this.vault[this.owner].tinyUrl},r.prototype.setTinyUrl=function(a){this.vault[this.owner].tinyUrl=a},r.prototype.getExampleId=function(){return this.vault[this.owner].exampleId},r.prototype.setExampleId=function(a){this.vault[this.owner].exampleId=a},r.prototype.getDescription=function(){return this.vault[this.owner].description},r.prototype.setDescription=function(a){return this.vault[this.owner].description=a,this},r.prototype.moveCursorToEnd=e,r}(window.jQuery,window.hljs),Calls=function(a,b){"use strict";function c(b,c,d,e,f,g){a.ajax({type:b,headers:e,url:c,async:!0,data:JSON.stringify(d),dataType:f,success:function(a){var b={draft:a.draft,info:a.info,stages:a.stages,stage:a.stage,warnings:a.warnings,failure:a.failure};g&&g(b)},error:function(a,b,c){var d={failure:{message:a.responseText||c}};g&&g(d)}})}function d(a,b,d){var e={"Content-Type":"text/plain; charset=UTF-8","x-auth-token":"legolas"};c("GET",a,null,b||e,"text",d)}function e(a,b,d,e){var f={"Content-Type":"application/json; charset=UTF-8","x-auth-token":"legolas"};c("POST",a,b,d||f,"json",e)}function f(a,b,d,e){var f={"Content-Type":"application/json; charset=UTF-8","x-auth-token":"legolas"};c("PUT",a,b,d||f,"json",e)}return b.ACTIVE=!0,b.STAGING="http://www.cookandstuff.com/kiwi/",b.PRODUCTION="http://www.vesperin.com/kiwi/",b.CURRENT_HOST=b.ACTIVE?b.PRODUCTION:b.STAGING,b.CURATORS="&q=roles:curators",b.SERVICE_POST_URL=b.CURRENT_HOST+"eval?auth_token=legolas",b.SERVICE_GET_URL=b.CURRENT_HOST+"find?"+b.CURATORS,b.fetch=c,b.get=d,b.post=e,b.put=f,b}(window.jQuery,Calls||{}),Refactoring=function(a){"use strict";var b=Calls.SERVICE_POST_URL,c=Calls.SERVICE_GET_URL;return a.deleteSelection=function(a,c,d,e,f){var g=d.start,h=d.end,i=Utils.createCode(a,"Java: *scratched* code snippet",c),j={remove:{what:"region",where:[g,h],source:i,preprocess:e}};Calls.post(b,j,null,f)},a.detectMissingImports=function(a,c,d){var e=Utils.createCode(a,"Java: *scratched* code snippet",c),f={inspect:{source:e,imports:!0}};Calls.post(b,f,null,d)},a.detectPartialSnippet=function(a,c,d){var e=Utils.createCode(a,"Java: *scratched* code snippet",c),f={preprocess:{source:e}};Calls.post(b,f,null,d)},a.inspectWholeSourcecode=function(a,c,d){var e=Utils.createCode(a,"Java: *scratched* code snippet",c),f={inspect:{source:e,imports:!1}};Calls.post(b,f,null,d)},a.renameSelectedMember=function(a,c,d,e,f,g){var h=e.start,i=e.end,j=Utils.createCode(a,"Java: *scratched* code snippet",d),k={rename:{what:"member",to:c,where:[h,i],source:j,preprocess:f}};Calls.post(b,k,null,g)},a.clipSelectedBlock=function(a,c,d,e,f){var g=d.start,h=d.end,i=Utils.createCode(a,"Java: *scratched* code snippet",c),j={slice:{source:i,where:[g,h],preprocess:e}};
Calls.post(b,j,null,f)},a.deduplicate=function(a,c,d,e){var f=Utils.createCode(a,"Java: *scratched* code snippet",c),g={deduplicate:{source:f,preprocess:d}};Calls.post(b,g,null,e)},a.fullCleanup=function(a,c,d,e){var f=Utils.createCode(a,"Java: *scratched* code snippet",c),g={cleanup:{source:f,preprocess:d}};Calls.post(b,g,null,e)},a.optimize=function(a,c,d){var e=Utils.createCode(a,"Java: *scratched* code snippet",c),f={optimize:{source:e}};Calls.post(b,f,null,d)},a.format=function(a,c,d){var e=Utils.createCode(a,"Java: *scratched* code snippet",c),f={format:{source:e}};Calls.post(b,f,null,d)},a.multistageCode=function(a,c,d,e){var f=Utils.createCode(a,"Java: *scratched* code snippet",c),g={multistage:{source:f,budget:10,preprocess:d}};Calls.post(b,g,null,e)},a.getParticipants=function(a){Calls.get(c,null,a)},a.saveCodeSnippet=function(a,c){var d={persist:{source:a}};Calls.put(b,d,null,c)},a.updateCodeSnippet=function(a,c){var d={update:{source:a}};Calls.post(b,d,null,c)},a}(Refactoring||{}),Heuristics=function(a,b,c){"use strict";function d(a){return B.indexOf(a)>-1}function e(b){var c=(b.className+" "+(b.parentNode?b.parentNode.className:"")).split(/\s+/);return c=c.map(function(a){return a.replace(/^lang(uage)?-/,"")}),c.filter(function(b){return a.getLanguage(b)||"no-highlight"==b})[0]}function f(a){return["objective-c","cpp"].indexOf(a)>-1}function g(a){return["perl","prolog"].indexOf(a)>-1}function h(a){return["ecl","prolog"].indexOf(a)>-1}function i(a){return["typescript","xml"].indexOf(a)>-1}function j(a){return["common lisp","opencl"].indexOf(a)>-1}function k(a){return["rebol","r"].indexOf(a)>-1}function l(a){return["cs","java"].indexOf(a)>-1}function m(a){return["cpp","java"].indexOf(a)>-1}function n(a){return["c","java"].indexOf(a)>-1}function o(a){return["javascript","java"].indexOf(a)>-1}function p(a){return["cpp","cs"].indexOf(a)>-1}function q(a){var b=[];return a.indexOf("@interface")>-1&&b.push("objective-c"),(a.indexOf("#include <cstdint>")>-1||/include\\s*[<"]/.test(a)||/\\b(deque|list|queue|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array)\\s*</.test(a)||a.indexOf("::"))&&b.push("cpp"),b}function r(a){var b=[];return a.indexOf("use strict")>-1&&b.push("perl"),a.indexOf(":-")>-1&&b.push("prolog"),b}function s(a){var b=[];return a.indexOf(":=")>-1&&b.push("ecl"),a.indexOf(":-")>-1&&b.push("prolog"),b}function t(a){var b=[];return b.push(a.indexOf("</translation>")>-1?"xml":"typescript"),b}function u(a){var b=[];return a.indexOf("(defun ")>-1&&b.push("common lisp"),/\/\* |\/\/ |^\}/.test(a)&&b.push("opencl"),b}function v(a){var b=[];return/\bRebol\b/i.test(a)&&b.push("rebol"),a.indexOf("<-")>-1&&b.push("r"),b}function w(a){var b=[];return(a.indexOf("<summary>")>-1||a.indexOf("using System;")>-1||a.indexOf("typeof")>-1||a.indexOf("sizeof")>-1)&&b.push("cs"),a.indexOf("import")>-1&&b.push("java"),b}function x(a){var b=[];return(a.indexOf("#include <cstdint>")>-1||/#include\\s*[<"]/.test(a)||/\\b(deque|list|queue|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array)\\s*</.test(a)||a.indexOf("::"))&&b.push("cpp"),a.indexOf("import")>-1&&b.push("java"),b}function y(a){var b=[];return(a.indexOf("#include")>-1||/#include\\s*["]/.test(a))&&b.push("c"),a.indexOf("import")>-1&&b.push("java"),b}function z(a){var b=[];return(a.indexOf("!==")>-1||/\$[(.]/.test(a))&&b.push("javascript"),a.indexOf("import")>-1&&b.push("java"),b}function A(a){var b=[];return(a.indexOf("#include <cstdint>")>-1||/#include\\s*[<"]/.test(a)||/\\b(deque|list|queue|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array)\\s*</.test(a)||a.indexOf("::"))&&b.push("cpp"),(a.indexOf("<summary>")>-1||a.indexOf("using System;")>-1||a.indexOf("typeof")>-1||a.indexOf("sizeof")>-1)&&b.push("cs"),b}var B=["java"];return c.findByHeuristics=function(a,b){return b.every(f)?q(a):b.every(g)?r(a):b.every(h)?s(a):b.every(i)?t(a):b.every(j)?u(a):b.every(k)?v(a):b.every(l)?w(a):b.every(m)?x(a):b.every(n)?y(a):b.every(o)?z(a):b.every(p)?A(a):void 0},c.detect=function(b){var f=b.text(),g=e(b);if("no-highlight"==g)return"Unknown Language";var h=g?a.highlight(g,f,!0):a.highlightAuto(f);if(d(h.language))return h.language;var i="undefined"!=typeof h.second_best;if(i&&d(h.second_best.language))return h.second_best.language;var j=i?[h.language,h.second_best.language]:[h.language,"cs"],k=c.findByHeuristics(f,j);return k&&k.length>0?k[0]:"Unknown Language"},c}(window.hljs,window.jQuery,Heuristics||{}),Vesperize=function(a,b){"use strict";function c(){PNotify.prototype.options.styling="octicon",PNotify.prototype.options.delay=4e3,PNotify.prototype.options.confirm={confirm:!1,prompt:!1,prompt_class:"",prompt_default:"",prompt_multi_line:!1,align:"right",buttons:[{text:"Ok",addClass:"violette-button minibutton",promptTrigger:!0,click:function(a,b){a.remove(),a.get().trigger("pnotify.confirm",[a,b])}}]},PNotify.prototype.modules.confirm={seen:new Set,container:null,prompt:null,init:function(b,c){this.container=a('<div style="margin-top:5px;clear:both;" />').css("text-align",c.align).appendTo(b.container),c.confirm||c.prompt?this.makeDialog(b,c):this.container.hide()},update:function(a,b){b.confirm?(this.makeDialog(a,b),this.container.show()):this.container.hide().empty()},afterOpen:function(a,b){b.prompt&&this.prompt.focus()},makeDialog:function(b,c){var d,e,f=!1,g=this;this.container.empty(),c.prompt&&(this.prompt=a("<"+(c.prompt_multi_line?'textarea rows="5"':'input type="text"')+' style="margin-bottom:5px;clear:both;" />').addClass(b.styles.input+" "+c.prompt_class).val(c.prompt_default).appendTo(this.container));for(var h in c.buttons)if(d=c.buttons[h],!this.seen.has(d.text)){if(f){this.container.append(" ");break}f=!0,e=a('<button type="button" />').addClass(b.styles.btn+" "+d.addClass).text(d.text).appendTo(this.container).on("click",function(a){return function(){"function"==typeof a.click&&a.click(b,c.prompt?g.prompt.val():null)}}(d)),c.prompt&&!c.prompt_multi_line&&d.promptTrigger&&this.prompt.keypress(function(a){return function(b){13==b.keyCode&&a.click()}}(e)),b.styles.text&&e.wrapInner('<span class="'+b.styles.text+'"></span>'),b.styles.btnhover&&e.hover(function(a){return function(){a.addClass(b.styles.btnhover)}}(e),function(a){return function(){a.removeClass(b.styles.btnhover)}}(e)),b.styles.btnactive&&e.on("mousedown",function(a){return function(){a.addClass(b.styles.btnactive)}}(e)).on("mouseup",function(a){return function(){a.removeClass(b.styles.btnactive)}}(e)),b.styles.btnfocus&&e.on("focus",function(a){return function(){a.addClass(b.styles.btnfocus)}}(e)).on("blur",function(a){return function(){a.removeClass(b.styles.btnfocus)}}(e))}}}}function d(a,b,c,d,e){a.openDialog?a.openDialog(b,e,{value:d}):e(prompt(c,d))}function e(a,b){return Drafts.mark(a,b,m),this}function f(b){b.staging.hasClass("violette-history")?(b.staging.removeClass("violette-history"),b.staging.addClass("violette-multistage btn-toolbar")):b.staging.addClass("violette-multistage btn-toolbar"),b.staging.css({"min-height":"25px",height:"auto"}),b.disableButtons(),m("info",b,"Entering notes view"),b.staging=Html.buildNoteSection(b),b.handler.push(b.namespace+"-close"),b.callback.push(function(b){a.scrollLock(),m("info",b,"Exiting notes view"),b.staging.children().hide(),b.staging.children().remove(),b.staging.hide(),b.codemirror.setOption("readOnly",!1),Utils.deleteButtonHandler(b,b.namespace+"-close"),Utils.deleteButtonHandler(b,b.namespace+"-next"),b.enableButtons(),b.codemirror.setSelection({line:0,ch:0}),b.displayer=null,a.scrollLock()}),b.handler.push(b.namespace+"-next"),b.callback.push(Notes.nextNote),b.staging.show(),Notes.nextNote(b),b.codemirror.setOption("readOnly",!0),b.codemirror.focus()}function g(a,b){var c=Html.buildHtml("span",{"class":"tabnav-left"},{});return a.displayer=Html.buildHtml("span","",{"class":"note"}),c.append(a.displayer),b.append(c),a.handler.push(a.namespace+"-next"),a.callback.push(Notes.nextNote),b}function h(c){function d(b){var c=parseInt(b),d=k.drafts.contains(c);if(!d)return void k.log.warn("Vesperize#replayHistory. Reason: trying to access a non-existent draft.");var e=k.drafts.getDraft(c),f=e.name,g=e.after;a(j).text(f),k.codemirror.setValue(g),k.notes=Notes.copyNotes(k.primaryKey,e.notes.notes),k.notes.empty()?(k.displayer.text(""),k.displayer.hide(),k.staging.css({"min-height":"25px",height:"auto"})):(k.staging.css({"min-height":"50px",height:"auto"}),k.displayer.show(),Notes.nextNote(k))}c.staging.hasClass("violette-multistage")&&(c.staging.removeClass("violette-multistage"),c.staging.addClass("violette-history btn-toolbar")),c.disableButtons(),m("info",c,"Entering history view");var e=Html.buildHtml("div",{"class":"btn-toolbar",style:"margin-left: 5px;"},{}),f=Html.buildHtml("div",{"class":"btn-toolbar"},{});e=g(c,e);var h=Html.buildHtml("span",{"class":"tabnav-left"},{}),i=Html.buildHtml("span",{"class":"tabnav-right"},{}),j=Html.buildHtml("span","",{id:Utils.brand("value"),"class":"tabnav-center",style:"margin-left:7px;"}),k=c;k.codemirror.setOption("readOnly",!0);var l=[0],n=[];n.push(c.drafts.size()-1);var o=[];o.push(c.drafts.size()),c.history=Html.buildEditTracker(),h.append(c.history),f.append(h),c.history.noUiSlider({start:o,step:1,connect:"lower",range:{min:l,max:n}}),c.history.Link("lower").to(d),f.append(j),i.append(Html.buildNextButton(c)),i.append(Html.buildHtml("span",{"class":"break"},{})),i.append(Html.buildClosingButton(c)),f.append(i),c.handler.push(c.namespace+"-close"),c.callback.push(function(c){a.scrollLock(),m("info",c,"Exiting history view"),c.staging.children().hide(),c.staging.children().remove(),c.staging.hide(),Utils.deleteButtonHandler(c,c.namespace+"-close"),Utils.deleteButtonHandler(c,c.namespace+"-next"),c.codemirror.setOption("readOnly",!1),c.enableButtons(),c.codemirror.setValue(b.get(c.primaryKey));var d=b.get(c.primaryKey+"notes");d&&(c.notes=Notes.copyNotes(c.primaryKey,d.notes)),c.displayer=null,a(c.history)[0].destroy(),c.history=null,c.enableButtons(),a.scrollLock()}),c.staging.append(e),c.staging.append(f),c.staging.show(),Notes.nextNote(c),c.codemirror.focus()}function i(a,b,c,d){a.buffers[b]=Editor.Doc(c,d)}function j(a,b){var c=b.label,d=b.source.content,e=b.where;if(d===a.codemirror.getValue())return y(a,e),void a.codemirror.focus();if(null!=c){if(a.buffers.hasOwnProperty(c))return void k(a,a.codemirror,c,e);i(a,c,d,"text/x-java"),k(a,a.codemirror,c,e)}}function k(a,b,c,d){var e=a.buffers[c],f=c!==C;b.setOption("readOnly",f),e.getEditor()&&(e=e.linkedDoc({sharedHist:!0}));var g=b.swapDoc(e),h=g.iterLinkedDocs(function(a){h=a});if(h){for(var i in a.buffers)a.buffers.hasOwnProperty(i)&&a.buffers[i]==g&&(a.buffers[i]=h);g.unlinkDoc(h)}d.length>0&&y(a,d),l(a),b.focus()}function l(a){var b=a.codemirror,c=b.getValue().replace(/\r\n|\r/g,"\n"),d=Utils.count(c),e=d.total+" lines ("+d.sloc+" sloc)";a.sloc.text(e)}function m(b,c,d){var e={};switch(b){case"error":e.title="Oh No",e.text=d+"!",e.type="error";break;case"notice":e.title="Watch out",e.text=d+"!",e.type="notice";break;case"info":e.title="Breaking News",e.text=d,e.type="info";break;case"success":e.title="Good News Everyone",e.text=d,e.type="success"}e.before_open=function(b){b.get().css({right:a(c.editor).width()/2-b.get().width()-10})},new PNotify(e),c.codemirror.focus()}function n(b,c,d){var e,f={};d=d||"no url",f.title="Sharing Example",f.text=c+"!",f.type="notice",f.icon="octicon octicon-link-external",f.hide=!1,f.confirm={prompt:!0,prompt_multi_line:!0,prompt_default:d},f.buttons={closer:!1,sticker:!1},f.history={history:!1},f.before_open=function(b){b.get().css({top:a(window).height()/2-b.get().height()/2,left:a(window).width()/2-b.get().width()/2}),e?e.fadeIn("fast"):e=a("<div />",{"class":"ui-widget-overlay",css:{display:"none",position:"fixed",top:"0",bottom:"0",right:"0",left:"0","z-index":"1040","background-color":"#000",opacity:".5"}}).appendTo("body").fadeIn("fast")},f.before_close=function(){e.fadeOut("fast")},new PNotify(f),b.codemirror.focus()}function o(a,b,c){var d=Matcher.matchClassName(a,B)+".java";return d!==b?(c.log.debug("Vesperize#compareAndSetClassName. Updated classname (from="+c.classname+", to="+d+")"),c.classname=d,d):b}function p(a,b){null==a.buffers&&null==a.history&&null==a.displayer&&null==a.document&&(a.persist(b),a.status.text("SAVED "))}function q(a,b){a.classname=o(b,a.classname,a),Refactoring.inspectWholeSourcecode(a.classname,b,function(b){var c=a.editor,d=t(b);if(d){if(r(b.warnings))return void a.log.info("Vesperize#inspectCodeExample. Ignoring `cannot resolve` errors. ");a.log.debug("Vesperize#inspectCodeExample. Code example "+(d?"contains":"doesn't contain")+" compiler errors."),c.hasClass("active")&&(c.removeClass("active"),c.addClass("broken"))}else c.hasClass("broken")&&(c.removeClass("broken"),c.addClass("active"))})}function r(a){if(a)for(var b=0;b<a.length;b++){var c=a[b];if(c.message.indexOf("cannot be resolved")>-1)return!0}return!1}function s(a){return"undefined"!=typeof a.info&&"true"===a.info.messages[0]}function t(a){return"undefined"!=typeof a.warnings&&a.warnings.length>0||"undefined"!=typeof a.failure}function u(b){b.fit();var c=b,d=Utils.debounce(function(){c.fit()},250,!1);a(window).on("resize",d),b.stopwatch=new Stopwatch}function v(){try{return b.enabled}catch(a){return!1}}function w(b,c){var d=b.multistage[b.id],e=d.stages,f=a.grep(e,function(a){return a.label===c});j(b,f[0])}function x(a){a.operation(function(){for(var b=a.firstLine();b<=a.lastLine();++b)a.foldCode({line:b,ch:0},null,"unfold")})}function y(a,b){b=b||[];for(var c=0;c<b.length;c++){var d=b[c],e=d.from[0],f=d.from[1];a.codemirror.foldCode(Editor.Pos(e,f),null,"fold")}a.codemirror.refresh()}function z(a){a.staging.hasClass("violette-history")?(a.staging.removeClass("violette-history"),a.staging.addClass("violette-multistage btn-toolbar")):a.staging.addClass("violette-multistage btn-toolbar"),a.staging.css({"min-height":"25px",height:"auto"}),a.disableButtons(),m("info",a,"Entering multistage view"),a.buffers={},a.buffers[C]=a.codemirror.getDoc(),"undefined"==typeof a.multistage[a.id]&&a.codemirror.focus();for(var b=a.multistage[a.id],c=b.stages,d=c.length,e=0;d>e;e++){var f=c[e],g=e+" : "+f.label,h=f.label,i=a.namespace+"-"+h;a.indexes.push(i);var j=Html.buildHtml("button",g,{type:"button",title:g,"class":"violette-button minibutton primary","data-provider":a.namespace,"data-handler":i,"data-stage":h});j.tooltipster({position:"bottom",theme:"tooltip-custom-theme"}),a.handler.push(i),a.callback.push(w),a.staging.append(j)}a.staging.append(Html.buildClosingButton(a)),a.handler.push(a.namespace+"-close"),a.callback.push(function(a){m("info",a,"Exiting multistage view"),a.staging.children().hide(),a.staging.children().remove(),a.staging.hide(),a.codemirror.swapDoc(a.buffers[C]),a.codemirror.setOption("readOnly",!1),a.buffers=null,Utils.deleteButtonHandler(a,a.namespace+"-close"),x(a.codemirror);for(var b=0;b<a.indexes.length;b++){var c=a.indexes[b],d=a.handler.indexOf(c);delete a.handler[d],delete a.callback[d]}a.indexes=[],l(a),a.enableButtons()}),a.staging.show(),a.codemirror.focus()}function A(a,b){var c=a.codemirror,d=a.options.silent;if(b.draft){var e=b.draft.after;a.classname!==e.name&&(a.classname=e.name),a.lastaction=b.draft.cause,c.setValue(e.content),l(a)}else if(b.info)a.log.debug(b.info.messages.join("\n")),m("info",a,b.info.messages.join("\n")),c.focus();else if(b.warnings)d?a.log.info(b.warnings.join("\n")):a.editor.hasClass("broken")||a.editor.addClass("broken");else if(b.stages)a.multistage[a.id]=b.stages,z(a);else if(b.stage){var f=b.stage,g=f.where;y(a,g)}else{var h="There was an internal server error.",i=b.failure.message.indexOf(h)>-1,j=0==b.failure.message.length,k=i||j?"Invalid selection; unable to perform operation.":b.failure.message;a.log.error("Kiwi misbehaved: "+k),m("error",a,k)}c.focus()}var B="Scratched",C="Original",D={silent:!0,width:"inherit",height:"inherit",hideable:!1,intervalinmillis:2e3,actions:[{name:"delete",title:"Safely delete a selected code element.",icon:"octicon octicon-trashcan",callback:function(b){var c=b.codemirror,d=c.getValue();if(""!=d){var e=c.getSelection();if(""===e)m("notice",b,"There is nothing to delete");else if(e===d)m("notice",b,"There won't be any example left after this deletion");else{b.classname=o(d,b.classname,b);var f=Utils.selectionOffsets(c,d,e);a.scrollLock(),Matcher.isComment(e)?(d=d.replace(e,""),Refactoring.format(b.classname,d,function(c){A(b,c),b.lastaction="Delete comment",b.log.info("Vesperize#delete. Deleting code section containing a comment. No Preprocessing required."),a.scrollLock()})):Refactoring.detectPartialSnippet(b.classname,d,function(c){var e=s(c);Refactoring.deleteSelection(b.classname,d,f,e,function(c){b.log.info("Vesperize#delete. Deleting a code section. Preprocessing detected ("+e+")."),A(b,c),a.scrollLock()})})}}}},{name:"clip",title:"Clip a code selection",icon:"octicon octicon-clippy",callback:function(b){var c=b.codemirror,d=c.getValue();if(""!=d){var e=c.getSelection();if(""===e)m("notice",b,"There is nothing to delete");else if(Matcher.isMethod(e)){b.classname=o(d,b.classname,b);var f=Utils.selectionOffsets(c,d,e);a.scrollLock(),Refactoring.detectPartialSnippet(b.classname,d,function(c){var e=s(c);Refactoring.clipSelectedBlock(b.classname,d,f,e,function(c){b.log.info("Vesperize#clip. Clipping a code section. Preprocessing detected ("+e+")."),A(b,c),a.scrollLock()})})}else m("notice",b,"Only methods can be clipped. Please select one")}}},{name:"cleanup",title:"Code formatting plus deduplication",icon:"octicon octicon-three-bars",callback:function(b){var c=b.codemirror,d=c.getValue();""!=d&&(b.classname=o(d,b.classname,b),a.scrollLock(),Refactoring.detectPartialSnippet(b.classname,d,function(c){var e=s(c);Refactoring.fullCleanup(b.classname,d,e,function(c){b.log.info("Vesperize#cleanup. Cleaning code example. Preprocessing detected ("+e+")."),A(b,c),a.scrollLock()})}))}},{name:"rename",title:"Rename a selected element",icon:"octicon octicon-diff-renamed",callback:function(b){var c=b.codemirror,e=c.getValue(),f=c.getSelection();if(""!=e){""==f&&m("notice",b,"Please select something");var g=Utils.selectionOffsets(c,e,f);b.classname=o(e,b.classname,b),a.scrollLock();var h=c;d(c,Html.buildInput("New Name?").html(),"Enter new name:",f,function(c){h.operation(function(){c!==f&&null!==c&&Refactoring.detectPartialSnippet(b.classname,e,function(d){var f=s(d);Refactoring.renameSelectedMember(b.classname,c,e,g,f,function(c){b.log.info("Vesperize#rename. Renaming a selected class member. Preprocessing detected ("+f+")."),A(b,c),a.scrollLock()})})})})}}},{name:"annotate",title:"Annotates code sections",icon:"octicon octicon-comment",callback:function(b){var c=b.codemirror,e=c;a.scrollLock(),d(c,Html.buildInput().html(),"Annotates selection:","",function(c){e.operation(function(){var d=e.getValue(),f=e.getSelection();f=""===f?d:f;var g=Utils.selectionLocation(e,d,f),h=Notes.buildNote(c,g,Notes.chunkContent(d,g));b.notes.addNote(h),b.log.info("Vesperize#annotate. Annotating a selected code section. Notes size ("+b.notes.size()+")."),a.scrollLock()})})}},{name:"stage",title:"Multi stage code example",label:"Stage",callback:function(b){if(null!=b.buffers)return void b.codemirror.focus();b.buffers={};var c=b.codemirror,d=c.getValue();""!=d&&(b.classname=o(d,b.classname,b),a.scrollLock(),Refactoring.detectPartialSnippet(b.classname,d,function(c){var e=s(c);Refactoring.multistageCode(b.classname,d,e,function(c){b.log.info("Vesperize#stage. Multistaging the code example."),A(b,c),a.scrollLock()})}))}},{name:"history",title:"Show edit history",label:"History",callback:function(a){return null!=a.history?void a.codemirror.focus():void(a.drafts.empty()?(a.log.warn("Vesperize#history. You have no marked drafts."),m("notice",a,"You have no marked drafts")):(a.log.info("Vesperize#history. Replaying history. Drafts ("+a.drafts.size()+")"),h(a)))}},{name:"notes",title:"Launch notes",label:"Notes",callback:function(a){a.notes.size()>0?(a.log.info("Vesperize#notes. Launching notes. Notes ("+a.notes.size()+")"),f(a)):(a.log.warn("Vesperize#notes. You have no notes."),m("notice",a,"You have not annotated anything")),a.codemirror.focus()}}],modes:[{name:"options",title:"More options",icon:"octicon octicon-gear",callback:function(){}}],social:[{name:"share",title:"Share your master piece",label:"SHARE",callback:function(b){var c=b.codemirror,d=c.getValue();if(null!==b.tinyUrl)return void n(b,"Anyone with this link can see your fantastic work",b.tinyUrl);if(""==d)return void m("notice",b,"There is nothing to save");b.classname=o(d,b.classname,b),a.scrollLock();var e=b;Refactoring.format(b.classname,d,function(b){if(b.draft){var c=b.draft.after;e.stopwatch.stop(),c.elapsedtime=e.stopwatch.toString(),c.comments=e.notes.toHashArray(),c.confidence=5,c.url=document.location.href,Refactoring.saveCodeSnippet(c,function(b){if(b.info)e.tinyUrl=b.info.messages[1],e.exampleId=b.info.messages[2],e.log.info("Vesperize#share. Sharing + saving code example. Example ID ("+e.exampleId+")"),n(e,"Anyone with this link can see your fantastic work",e.tinyUrl);else{var c="undefined"!=typeof b.warnings&&b.warnings.length>0,d="undefined"!=typeof b.failure,f=c?": "+b.warnings.join(","):d?": "+b.failure.message:"";f+=".",e.log.error("Vesperize#share. Unable to save your code example"+f),m("error",e,"Unable to save your code example")}a.scrollLock()})}})}},{name:"document",title:"Document curated example.",label:"DOCUMENT",callback:function(a){a.log.info("Vesperize#document. Launching documentation mode."),a.document=new Document(a)}}]},E=function(b,d){this.id=Utils.brand("violette"),this.namespace="violette-scratchspace",this.options=a.extend(!0,{},D,d),this.element=a(b),this.primaryKey=this.element.attr("data-identity"),this.handler=[],this.callback=[],this.classname=null,this.codemirror=null,this.editor=null,this.textarea=null,this.status=null,this.sloc=null,this.staging=null,this.drafts=new Drafts(this.primaryKey),this.history=null,this.lastaction=null,this.log=new Logger(this.primaryKey),this.notes=new Notes(this.primaryKey),this.displayer=null,this.content=null,this.tinyUrl=null,this.exampleId=null,this.multistage={},this.buffers=null,this.indexes=[],this.description="Java: *scratched* code snippet",this.tags=[],this.confidence=5,this.document=null,this.parent=this.element.parent("div.post-text"),this.context={dir1:"down",dir2:"left",context:this.parent},PNotify.removeAll(),c(),this.log.info("Initializing Violette"),this.init(),this.stopwatch=new Stopwatch};return E.prototype.init=function(){var b=this;if(this.checkStorage(),null==this.editor){var c=Html.buildHtml("div",{id:this.id,"class":"violette-editor file",click:function(){b.focus()}},{});c.append(Html.buildHeader(this));var d=Html.buildHtml("textarea",b.content,{});c.append(Html.buildBody(this,d)),c.append(Html.buildFooter(this)),this.element.replaceWith(c),a.each(["height","width"],function(d,e){"inherit"!=b.options[e]&&(a.isNumeric(b.options[e])?c.css(e,b.options[e]+"px"):c.addClass(b.options[e]))}),this.editor=c,this.codemirror=Editor.fromTextArea(this.textarea[0],{lineNumbers:!0,styleActiveLine:!0,styleSelectedText:!0,theme:"default",mode:"text/x-java",viewportMargin:1/0,foldGutter:!0,matchBrackets:!0,extraKeys:{"Ctrl-Q":function(a){b.log.info("Pressing Ctrl-Q to force folding of code block."),a.foldCode(a.getCursor())},"Ctrl-S":function(a){b.log.info("Pressing Ctrl-S to force saving example and marking a draft."),e(b,a.getValue()),p(b,a.getValue()),q(b,a.getValue())}},undoDepth:1,gutters:["breakpoints","Editor-linenumbers","Editor-foldgutter"]});var f=13.45,g=a(this.textarea).val().split(/\r\n|\r|\n/).length;g=20>=g?20:g,g=g>35?30:g;var h=g*f;this.codemirror.setSize("100%",h),this.codemirror.refresh(),this.editor.idleTimer(b.options.intervalinmillis),this.bindElements()}else this.editor.show();return u(this),this},E.prototype.bindElements=function(){this.editor.on("click",'[data-provider="violette-scratchspace"]',a.proxy(this.handleClickEvent,this)),this.codemirror.on("focus",a.proxy(this.focus,this)),this.codemirror.on("blur",a.proxy(this.blur,this));var b=this,c=Utils.debounce(function(){var a=b.codemirror.getValue();b.classname=o(a,b.classname,b),p(b,a)},250,!1);this.editor.on("idle.idleTimer",c),this.codemirror.on("beforeChange",function(a){b.status.text("NOT SAVED "),a.old=a.getValue()}),this.codemirror.on("change",function(a){a.old!==a.getValue()&&null!==b.tinyUrl&&(m("info",b,"Saving NEW code example"),b.tinyUrl=null,b.stopwatch=new Stopwatch,a.old=null)});var d=Utils.debounce(function(){screenfull.isFullscreen?(b.exchange("fullscreen","octicon-screen-normal"),b.change("fullscreen",function(b){a(b).tooltipster("content","Exit fullscreen")})):(b.exchange("fullscreen","octicon-screen-full"),b.change("fullscreen",function(b){a(b).tooltipster("content","Enter fullscreen")}))},250,!1);this.editor.on(screenfull.raw.fullscreenchange,d)},E.prototype.checkStorage=function(){this.checkSavedContent(),this.checkSavedAndMarkedDrafts(),this.checkOtherSavedInfo()},E.prototype.checkSavedContent=function(){if(v()){var a=b.get(this.primaryKey);return a?(this.content=a,this):null==this.content?(this.content=Utils.getContent(this,this.element),this):void 0}},E.prototype.checkSavedAndMarkedDrafts=function(){if(v()){var a=b.get(this.primaryKey+"drafts");if(a){this.drafts=new Drafts(this.primaryKey);for(var c=0;c<a.drafts.length;c++){var d=a.drafts[c];this.drafts.addDraft(d)}}return this}},E.prototype.checkOtherSavedInfo=function(){if(v()){var a=b.get(this.primaryKey+"eid");a&&(this.exampleId=a,this.tinyUrl=b.get(this.primaryKey+"tinyUrl"));var c=b.get(this.primaryKey+"notes");if(c){this.notes=new Notes(this.primaryKey);for(var d=0;d<c.notes.length;d++){var e=c.notes[d];this.notes.addNote(e)}}return this}},E.prototype.handleClickEvent=function(b){var c=this,d=a(b.currentTarget),e=c.handler,f=c.callback,g=d.attr("data-handler"),h=e.indexOf(g),i=f[h];"undefined"==typeof d.attr("data-stage")?i(c):i(c,d.attr("data-stage")),b.preventDefault()},E.prototype.persist=function(a){if(!v())return this;var c=b.get(this.primaryKey);c!==a&&(b.set(this.primaryKey,a),this.content=null);var d=this.primaryKey+"eid",e=this.exampleId||null;if(null!==e){var f=b.get(d);f!==e&&b.set(d,e),d=this.primaryKey+"tinyUrl";var g=this.tinyUrl,h=b.get(d);h!==g&&b.set(d,g)}d=this.primaryKey+"drafts";var i=this.drafts.toJSON(),j=b.get(d);b.serialize(j)!==b.serialize(i)&&b.set(d,i),d=this.primaryKey+"notes",this.notes=Notes.transfer(this,this.notes);var k=this.notes.toJSON(),l=b.get(d);return b.serialize(l)!==b.serialize(k)&&b.set(d,k),this},E.prototype.change=function(b,c){var d=this,e=d.handler,f="all"==b;a.each(e,function(a,e){var g=f?!1:e.indexOf(b)<0;!g&&c&&c(d.editor.find('button[data-handler="'+e+'"]'))})},E.prototype.exchange=function(a,b){function c(a){var c=a.find("span.mega-octicon");c.length>=1&&(c.hasClass("octicon-screen-full")?(c.removeClass("octicon-screen-full"),c.addClass(b)):c.hasClass("octicon-screen-normal")&&(c.removeClass("octicon-screen-normal"),c.addClass(b)))}var d=this;d.change(a,c)},E.prototype.focus=function(){var b=this.editor;return b.addClass("active"),a(document).find(".violette-editor").each(function(){if(a(this).attr("id")!=b.attr("id")){var c=a(this).find("textarea").data("scratchspace");null==c&&(c=a(this).find('div[data-provider="violette-preview"]').data("scratchspace")),c&&c.blur()}}),this},E.prototype.blur=function(){var a=this.options,b=this.editor,c=a.hideable;return(b.hasClass("active")||0==this.element.parent().length)&&(b.removeClass("active"),c&&b.hide()),this},E.prototype.fit=function(){this.codemirror.refresh()},E.prototype.enableButtons=function(a){a=a||"all";var b=function(a){a.removeAttr("disabled")};return this.change(a,b),this},E.prototype.disableButtons=function(a){a=a||"all";var b=function(a){a.attr("disabled","disabled")};return this.change(a,b),this},E}(window.jQuery,window.store);!function(a){"use strict";function b(a){a.attr("data-provide","violette-editable"),a.attr("data-savable","true")}function c(a,b){return new Vesperize(a,b)}function d(a){if(0!==a.find("pre").length)return!1;if(a.outerWidth()<100)return!1;var b=a.text().split("\n"),c=b.length;if(15>c)return!1;var d=["java","c","cpp","cs"],e=Heuristics.detect(a);return d.indexOf(e)>-1}function e(b,c){b.mouseenter(function(){var b=a(this).position(),d=a(this).outerWidth();c.css({position:"absolute",top:b.top+7+"px",left:b.left+d-45+"px"}).show(),c.show()}),b.mouseleave(function(){c.hide()}),c.mouseenter(function(b){a(this).show(),b.stopPropagation()}).mouseleave(function(){a(this).hide()})}function f(a){a.attr("title","Edit code"),a.tooltipster({position:"left",theme:"tooltip-custom-theme"})}function g(b){b.unbind("click").click(function(b){var c=a(this).attr("data-scratcher-id"),d=a("pre[data-scratcher-id='"+c+"']");j(d),b.preventDefault()})}var h=0;LE.init("2e1a6f53-37b0-4cd2-9252-cd4ed1734b19");var i=a.fn.scratchspace;a.fn.scratchspace=function(b){return this.each(function(){var d=a(this),e=d.attr("data-scratcher-id"),f=a("div[data-scratcher-id='"+e+"']");f.hide();var g=d.data("scratchspace"),h="object"==typeof b&&b;g||d.data("scratchspace",g=c(this,h))})},a.fn.scratchspace.noConflict=function(){return a.fn.scratchspace=i,this};var j=function(a){return a.data("scratchspace")?void a.data("scratchspace").init():void a.scratchspace(a.data())};a(document).on("click.scratchspace.data-api",'[data-provide="violette-editable"]',function(b){j(a(this)),b.preventDefault()}).ready(function(){a("pre").each(function(){var c=a(this);c.each(function(){var c=a(this);if(d(c)){var i=c.attr("data-provide"),j="undefined"!=typeof i&&i!==!1;if(!j){var k=a("<div/>",{"class":"scratch-button"}),l=a('<button class="violette-button octicon-danger"><span class="octicon octicon-pencil"></span></button>');k.append(l),k.attr("data-scratcher-id",h),c.attr("data-scratcher-id",h);var m;m="undefined"!=typeof c.parents("div.answer")[0]?c.parents("div.answer")[0]:"undefined"!=typeof c.parents("div.question")[0]?c.parents("div.question")[0]:null;var n;if(null!=m){var o=a(m),p=o.attr("data-answerid"),q=o.attr("data-questionid");n=p||q}"undefined"==typeof n&&(n=h),c.attr("data-identity",n),b(c),h++,a("body").append(k),k.hide(),e(c,k),f(k),g(k)}}})})})}(window.jQuery);